!function(e){"use strict";var h,d,c,t,s,r,i,a,l,n,f,u;h=window.jQuery,d=window,c=document,t="tocify",s="tocify-hide",i="."+(r="tocify-header"),l="."+(a="tocify-subheader"),f="."+(n="tocify-item"),u="tocify-extend-page",h.widget("toc.tocify",{version:"1.9.0",options:{context:"body",ignoreSelector:null,selectors:"h1, h2, h3",showAndHide:!1,showEffect:"slideDown",showEffectSpeed:"medium",hideEffect:"slideUp",hideEffectSpeed:"medium",smoothScroll:!0,smoothScrollSpeed:"medium",scrollTo:0,showAndHideOnScroll:!0,highlightOnScroll:!0,highlightOffset:40,theme:"uikit",extendPage:!1,extendPageOffset:100,history:!1,scrollHistory:!1,hashGenerator:"compact",highlightDefault:!0},_create:function(){var e=this;e.extendPageScroll=!0,e.items=[],e._generateToc(),e._addCSSClasses(),e.webkit=function(){for(var e in d)if(e&&-1!==e.toLowerCase().indexOf("webkit"))return!0;return!1}(),e._setEventHandlers(),h(d).load(function(){e._setActiveElement(!0),h("html, body").promise().done(function(){setTimeout(function(){e.extendPageScroll=!1},0)})})},_generateToc:function(){var e,i,o=this,n=o.options.ignoreSelector;if((e=-1!==this.options.selectors.indexOf(",")?h(this.options.context).find(this.options.selectors.replace(/ /g,"").substr(0,this.options.selectors.indexOf(","))):h(this.options.context).find(this.options.selectors.replace(/ /g,""))).length){o.element.addClass(t);var a=h(this.options.context).find(this.options.selectors),l=0;e.each(function(e){if(!h(this).is(n)){for(i=h("<ul/>",{id:r+e,class:r}).append(o._nestElements(h(this),e)),o.element.append(i);a[l]!==this;)l+=1;for(var t=l+1;t<a.length&&a[t].nodeName.toLowerCase()!==a[l].nodeName.toLowerCase();)t+=1;for(l+=1;l<t;){var s=a[l];h(s).is(n)||o._appendSubheaders.call(s,o,i),l+=1}}})}else o.element.addClass(s)},_setActiveElement:function(e){var t=this,s=d.location.hash.substring(1),i=t.element.find('li[data-unique="'+s+'"]');return s.length?(t.element.find("."+t.focusClass).removeClass(t.focusClass),i.addClass(t.focusClass),t.options.showAndHide&&i.click()):(t.element.find("."+t.focusClass).removeClass(t.focusClass),!s.length&&e&&t.options.highlightDefault&&t.element.find(f).first().addClass(t.focusClass)),t},_nestElements:function(t,e){var s,i,o;return(s=h.grep(this.items,function(e){return e===t.text()})).length?this.items.push(t.text()+e):this.items.push(t.text()),o=this._generateHashValue(s,t,e),i=h("<li/>",{class:n,"data-unique":o}).append(h("<a/>",{text:t.text()})),t.before(h("<div/>",{name:o,"data-unique":o})),i},_generateHashValue:function(e,t,s){var i="",o=this.options.hashGenerator;if("pretty"===o){for(i=t.text().toLowerCase().replace(/\s/g,"-");-1<i.indexOf("--");)i=i.replace(/--/g,"-");for(;-1<i.indexOf(":-");)i=i.replace(/:-/g,"-")}else i="function"==typeof o?o(t.text(),t):t.text().replace(/\s/g,"");return e.length&&(i+=""+s),i},_appendSubheaders:function(e,t){var s=h(this).index(e.options.selectors),i=h(e.options.selectors).eq(s-1),o=+h(this).prop("tagName").charAt(1),n=+i.prop("tagName").charAt(1);o<n?e.element.find(l+"[data-tag="+o+"]").last().append(e._nestElements(h(this),s)):o===n?t.find(f).last().after(e._nestElements(h(this),s)):t.find(f).last().after(h("<ul/>",{class:a,"data-tag":o})).next(l).append(e._nestElements(h(this),s))},_setEventHandlers:function(){var r=this;this.element.on("click.tocify","li",function(e){if(r.options.history&&(d.location.hash=h(this).attr("data-unique")),r.element.find("."+r.focusClass).removeClass(r.focusClass),h(this).addClass(r.focusClass),r.options.showAndHide){var t=h('li[data-unique="'+h(this).attr("data-unique")+'"]');r._triggerShow(t)}r._scrollTo(h(this))}),this.element.find("li").on({"mouseenter.tocify":function(){h(this).addClass(r.hoverClass),h(this).css("cursor","pointer")},"mouseleave.tocify":function(){"uikit"!==r.options.theme&&h(this).removeClass(r.hoverClass)}}),(r.options.extendPage||r.options.highlightOnScroll||r.options.scrollHistory||r.options.showAndHideOnScroll)&&h(d).on("scroll.tocify",function(){h("html, body").promise().done(function(){var o,e,t,s,n=h(d).scrollTop(),i=h(d).height(),a=h(c).height(),l=h("body")[0].scrollHeight;if(r.options.extendPage&&(r.webkit&&n>=l-i-r.options.extendPageOffset||!r.webkit&&i+n>a-r.options.extendPageOffset)&&!h(".tocify-extend-page").length){if(!(e=h('div[data-unique="'+h(f).last().attr("data-unique")+'"]')).length)return;t=e.offset().top,h(r.options.context).append(h("<div />",{class:u,height:Math.abs(t-n)+"px","data-unique":u})),r.extendPageScroll&&(s=r.element.find("li.active"),r._scrollTo(h('div[data-unique="'+s.attr("data-unique")+'"]')))}setTimeout(function(){var e,s=null,i=null,t=h(r.options.context).find("div[data-unique]");t.each(function(e){var t=Math.abs((h(this).next().length?h(this).next():h(this)).offset().top-n-r.options.highlightOffset);if(!(null==s||t<s))return!1;s=t,i=e}),e=h(t[i]).attr("data-unique"),o=h('li[data-unique="'+e+'"]'),r.options.highlightOnScroll&&o.length&&(r.element.find("."+r.focusClass).removeClass(r.focusClass),o.addClass(r.focusClass)),r.options.scrollHistory&&d.location.hash!=="#"+e&&d.location.replace("#"+e),r.options.showAndHideOnScroll&&r.options.showAndHide&&r._triggerShow(o,!0)},0)})})},show:function(e,t){var s=this;if(!e.is(":visible"))switch(e.find(l).length||e.parent().is(i)||e.parent().is(":visible")?e.children(l).length||e.parent().is(i)||(e=e.closest(l)):e=e.parents(l).add(e),s.options.showEffect){case"none":e.show();break;case"show":e.show(s.options.showEffectSpeed);break;case"slideDown":e.slideDown(s.options.showEffectSpeed);break;case"fadeIn":e.fadeIn(s.options.showEffectSpeed);break;default:e.show()}return e.parent().is(i)?s.hide(h(l).not(e)):s.hide(h(l).not(e.closest(i).find(l).not(e.siblings()))),s},hide:function(e){var t=this;switch(t.options.hideEffect){case"none":e.hide();break;case"hide":e.hide(t.options.hideEffectSpeed);break;case"slideUp":e.slideUp(t.options.hideEffectSpeed);break;case"fadeOut":e.fadeOut(t.options.hideEffectSpeed);break;default:e.hide()}return t},_triggerShow:function(e,t){return e.parent().is(i)||e.next().is(l)?this.show(e.next(l),t):e.parent().is(l)&&this.show(e.parent(),t),this},_addCSSClasses:function(){return"uikit"===this.options.theme?(this.element.find(i+","+l).addClass("bdt-nav bdt-nav-default"),this.focusClass="bdt-active"):(this.focusClass="tocify-focus",this.hoverClass="tocify-hover"),this},setOption:function(){h.Widget.prototype._setOption.apply(this,arguments)},setOptions:function(){h.Widget.prototype._setOptions.apply(this,arguments)},_scrollTo:function(e){var t=this.options.smoothScroll||0,s=this.options.scrollTo,i=h('div[data-unique="'+e.attr("data-unique")+'"]');return i.length&&h("html, body").promise().done(function(){h("html, body").animate({scrollTop:i.offset().top-(h.isFunction(s)?s.call():s)+"px"},{duration:t})}),this}})}();